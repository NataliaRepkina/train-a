<h2>SighUp</h2>
<form [formGroup]="registryForm" (ngSubmit)="onSubmit()">
  <mat-form-field appearance="outline">
    <mat-label for="email">Email</mat-label>
    <input matInput type="text" id="email" formControlName="email" (keydown)="onClearError()" />
    <!-- <mat-error *ngIf="email.errors?.['EmailError'] && email.pristine"></mat-error> -->
    <mat-error *ngIf="email.hasError('required') && email.dirty && email.touched">
      Required</mat-error
    >
  </mat-form-field>
  <div [ngClass]="(reason$ | async) === 'invalidUniqueKey' ? 'error' : 'hide'">
    Account with this email already exists
  </div>
  <div
    [ngClass]="
      email.errors?.['EmailError'] && email.dirty && email.touched && email.value.length
        ? 'error'
        : 'hide'
    "
  >
    Incorrect email
  </div>
  <mat-form-field appearance="outline">
    <mat-label for="password">Password</mat-label>
    <input matInput type="password" id="password" formControlName="password" />
    <!-- <mat-error *ngIf="password.hasError('required') && password.dirty">Required</mat-error> -->
  </mat-form-field>
  <mat-form-field appearance="outline">
    <mat-label for="repeatPassword">Repeat password</mat-label>
    <input matInput type="password" id="repeatPassword" formControlName="repeatPassword" />
    <!-- <mat-error *ngIf="repeatPassword.hasError('required')">Required</mat-error> -->
  </mat-form-field>
  <div
    [ngClass]="
      registryForm.errors?.['MatchError'] && repeatPassword.dirty && repeatPassword.touched
        ? 'second'
        : 'hide'
    "
  >
    Passwords do not match
  </div>
  <div class="wrapper-button">
    <button
      type="submit"
      mat-flat-button
      [ngStyle]="{ 'min-width.px': 100 }"
      [disabled]="!registryForm.valid || (reason$ | async) === 'invalidUniqueKey'"
    >
      Register
    </button>
    <button type="button" mat-flat-button [ngStyle]="{ 'min-width.px': 100 }" (click)="goSignIn()">
      Sign In
    </button>
  </div>
</form>
